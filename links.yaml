# This-RS Links Configuration
# Define entities and their relationships

entities:
  - singular: user
    plural: users
  
  - singular: company
    plural: companies
  
  - singular: car
    plural: cars
  
  - singular: address
    plural: addresses

links:
  # User owns cars
  - link_type: owner
    source_type: user
    target_type: car
    forward_route_name: cars-owned
    reverse_route_name: users-owners
    description: "User owns a car"
  
  # User drives cars (different from ownership)
  - link_type: driver
    source_type: user
    target_type: car
    forward_route_name: cars-driven
    reverse_route_name: users-drivers
    description: "User drives a car"
  
  # User works at companies
  - link_type: worker
    source_type: user
    target_type: company
    forward_route_name: companies-work
    reverse_route_name: users-workers
    description: "User works at a company"
    required_fields:
      - role
      - start_date
  
  # Company owns cars
  - link_type: owner
    source_type: company
    target_type: car
    forward_route_name: cars-owned
    reverse_route_name: companies-owners
    description: "Company owns a car"
  
  # User lives at addresses
  - link_type: resident
    source_type: user
    target_type: address
    forward_route_name: addresses-residence
    reverse_route_name: users-residents
    description: "User lives at an address"
  
  # Company is located at addresses
  - link_type: location
    source_type: company
    target_type: address
    forward_route_name: addresses-locations
    reverse_route_name: companies-located
    description: "Company is located at an address"

# Validation rules (optional)
# Define which entity types can be linked with which link types
validation_rules:
  owner:
    - source: user
      targets: [car, company]
    - source: company
      targets: [car]
  
  driver:
    - source: user
      targets: [car]
  
  worker:
    - source: user
      targets: [company]
  
  resident:
    - source: user
      targets: [address]
  
  location:
    - source: company
      targets: [address]
